# Дипломный проект: Автоматизация закупок в розничной сети

Оригинальное задание Netology: [Дипломный проект профессии «Python-разработчик: расширенный курс»](https://github.com/netology-code/python-final-diplom/blob/master/README.md)

## Описание задания

Разработка backend-приложения для автоматизации закупок в розничной сети с использованием Django Rest Framework. Сервис включает управление товарами, заказами, пользователями (клиенты и поставщики), импорт/экспорт товаров, отправку уведомлений по email, асинхронные операции и докеризацию.

## Мое решение

Проект представляет собой backend-приложение для автоматизации закупок в розничной сети, реализованное на Django Rest Framework.

**Архитектура:**
*   **Django Rest Framework:** Используется для создания REST API.
*   **PostgreSQL:** Реляционная база данных для хранения данных.
*   **Celery:** Используется для выполнения асинхронных задач, таких как отправка email и импорт/экспорт товаров.
*   **Redis:** Выступает в роли брокера сообщений для Celery.
*   **Docker, Docker Compose:** Используются для контейнеризации и оркестрации всех сервисов приложения, обеспечивая легкое развертывание.

**Основные функции:**
*   **Управление пользователями:** Реализованы механизмы регистрации, авторизации и восстановления пароля для двух типов пользователей: клиентов и поставщиков.
*   **Управление товарами:** Поддерживается импорт товаров из YAML-файлов, а также возможность добавления настраиваемых полей (характеристик) для товаров.
*   **Управление заказами:** Пользователи могут создавать заказы, добавляя товары от различных поставщиков в один заказ.
*   **Уведомления:** Автоматическая отправка email-уведомлений администратору (с накладной) и клиенту (с подтверждением заказа).
*   **Асинхронные операции:** Длительные задачи, такие как импорт товаров и отправка email, выполняются в фоновом режиме с помощью Celery, что предотвращает блокировку основного потока приложения.
*   **Докеризация:** Весь проект упакован в Docker-контейнеры, что упрощает его развертывание и управление зависимостями.

**Используемые технологии:**
*   Python 3.12
*   Django, Django Rest Framework
*   Celery, Redis
*   PostgreSQL
*   Docker, Docker Compose
*   YAML (для импорта данных)
*   `django-rest-passwordreset` (для восстановления пароля)
*   `ujson`, `pyyaml` (для работы с данными)

## Структура проекта

```
.
├── data/                       # Файлы с данными для импорта товаров (YAML)
│   ├── shop1.yaml              # Пример файла с данными магазина
│   └── test_price.yaml         # Пример файла с тестовыми ценами
├── reference/                  # Документация и пошаговые инструкции
│   └── netology_pd_diplom/     # Корневая директория Django-проекта
│       ├── backend/            # Django-приложение с логикой API
│       │   ├── migrations/     # Миграции базы данных
│       │   ├── tasks.py        # Celery-задачи
│       │   ├── models.py       # Модели данных
│       │   ├── serializers.py  # Сериализаторы DRF
│       │   ├── views.py        # Представления API
│       │   └── urls.py         # URL-маршруты приложения
│       ├── netology_pd_diplom/ # Основная конфигурация Django-проекта
│       │   ├── settings.py     # Настройки Django
│       │   ├── urls.py         # Главные URL-маршруты проекта
│       │   └── celery.py       # Настройки Celery
│       ├── manage.py           # Утилита управления Django
│       ├── db.sqlite3          # Файл базы данных SQLite (для разработки/тестирования)
│       └── requirements.txt    # Зависимости Python для Django-проекта
├── docker-compose.yml          # Конфигурация Docker Compose для запуска сервисов
├── Dockerfile                  # Определение Docker-образа для backend-приложения
├── requirements.txt            # Список зависимостей Python для всего проекта
├── .env                        # Переменные окружения (необходимо создать)
├── .gitignore                  # Файлы и папки, игнорируемые Git
├── plan.txt                    # План выполнения дипломного проекта
└── server.log                  # Лог-файл сервера
```

## Инструкции по запуску

Для запуска проекта убедитесь, что у вас установлен Docker и Docker Compose.

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/YOUR_USERNAME/python-final-diplom.git
    cd python-final-diplom
    ```

2.  **Настройте переменные окружения:**
    Создайте файл `.env` в корневой директории проекта со следующими переменными (пример):
    ```
    SECRET_KEY=your_secret_key
    DEBUG=True
    DATABASE_URL=postgres://user:password@db:5432/dbname
    EMAIL_HOST=smtp.example.com
    EMAIL_PORT=587
    EMAIL_USE_SSL=False
    EMAIL_HOST_USER=user@example.com
    EMAIL_HOST_PASSWORD=password
    ```
    *   `SECRET_KEY`: Секретный ключ для Django.
    *   `DEBUG`: Установите `False` для продакшн-среды.
    *   `DATABASE_URL`: Строка подключения к базе данных PostgreSQL.
    *   `EMAIL_HOST`, `EMAIL_PORT`, `EMAIL_USE_SSL`, `EMAIL_HOST_USER`, `EMAIL_HOST_PASSWORD`: Настройки для отправки email-уведомлений.

3.  **Запустите сервисы с помощью Docker Compose:**
    ```bash
    docker compose up --build
    ```

4.  **Выполните миграции базы данных:**
    После запуска контейнеров, выполните миграции в контейнере `backend`:
    ```bash
    docker compose exec backend python manage.py migrate
    ```

5.  **Создайте суперпользователя (опционально):**
    ```bash
    docker compose exec backend python manage.py createsuperuser
    ```

6.  **Доступ к API:**
    *   Django-приложение будет доступно по адресу `http://localhost:8000`.
    *   Документация API (Swagger UI) будет доступна по адресу `http://localhost:8000/swagger/` или `http://localhost:8000/redoc/`.